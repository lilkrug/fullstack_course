(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(124),a=n.n(o),s=n(3),i=n(8),l=n(59),u=(n(135),n(2)),j=n.n(u),d=n(10),b=n(7),h=n(4),O=n.n(h),p=Object(c.createContext)(""),f=n(5),m=n(0);var x=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=(Object(c.useContext)(p).authState,Object(d.g)());return Object(c.useEffect)((function(){localStorage.getItem("accessToken")?O.a.get("https://course-project-75u9.onrender.com/tours",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){401===e.status?j.a.fire({icon:"error",title:"\u041d\u0435\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439",text:"\u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0442\u043e\u043a\u0435\u043d\u0430 \u0438\u0441\u0442\u0435\u043a",confirmButtonColor:"#fe6401"}).then((function(){localStorage.removeItem("accessToken"),o.push("/login")})):void 0!=e.data.error?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:e.data.error,confirmButtonColor:"#fe6401"}).then((function(){localStorage.removeItem("accessToken"),o.push("/login")})):r(e.data)})).catch((function(e){j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"}).then((function(){localStorage.removeItem("accessToken"),o.push("/login")}))})):j.a.fire({icon:"error",title:"\u041d\u0435\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d!",confirmButtonColor:"#fe6401"}).then((function(){localStorage.removeItem("accessToken"),o.push("/login")}))}),[]),Object(m.jsx)("div",{className:"home-page",children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"formContainer",children:n.map((function(e,t){return Object(m.jsxs)("div",{className:"tourItem",children:[Object(m.jsx)("h3",{children:e.name}),Object(m.jsxs)("p",{children:["\u0426\u0435\u043d\u0430 \u0437\u0430 \u0434\u0435\u043d\u044c: $",e.priceOneDay]}),Object(m.jsxs)("p",{children:["\u0413\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430: ",e.Hotel.name]})]},t)}))})})})},g=n(9);var v=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(d.g)();Object(c.useEffect)((function(){localStorage.getItem("accessToken")||o.push("/login"),O.a.get("https://course-project-75u9.onrender.com/hotels/",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data),r(e.data)})).catch((function(e){if(e.response){var t=e.response.data.error;j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t,confirmButtonColor:"#fe6401"})}else j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"})}))}),[]);var a=g.c().shape({name:g.d().required("\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!"),hotelId:g.b().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0442\u0435\u043b\u044c"),priceOneDay:g.b().required("\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0446\u0435\u043d\u0443").min(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u2013 10.")});return Object(m.jsx)("div",{className:"createPostPage",children:Object(m.jsx)(f.d,{initialValues:{name:"",priceOneDay:100},onSubmit:function(e){console.log(e),O.a.post("https://course-project-75u9.onrender.com/tours",e,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){200===e.status&&j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0422\u0443\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"}).then((function(){o.push("/")}))})).catch((function(e){var t=e.response.data.error;console.log(e),400===e.response.status||409===e.response.status||404===e.response.status?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t}):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0443\u0440."})}))},validationSchema:a,children:Object(m.jsxs)(f.c,{className:"formContainer",children:[Object(m.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430: "}),Object(m.jsx)(f.a,{name:"name",component:"span"}),Object(m.jsx)(f.b,{autoComplete:"off",id:"inputCreatePost",name:"name",placeholder:"\u0415\u0433\u0438\u043f\u0435\u0442"}),Object(m.jsx)("label",{children:"\u041e\u0442\u0435\u043b\u044c: "}),Object(m.jsx)(f.a,{name:"hotelId",component:"span"}),Object(m.jsxs)(f.b,{as:"select",name:"hotelId",children:[Object(m.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0435\u043b\u044c"}),n.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(m.jsx)("label",{children:"\u0426\u0435\u043d\u0430 \u0432 \u0434\u0435\u043d\u044c: "}),Object(m.jsx)(f.a,{name:"priceOneDay",component:"span"}),Object(m.jsx)(f.b,{type:"number",id:"inputCreatePost",name:"priceOneDay",placeholder:"100"}),Object(m.jsx)("button",{type:"submit",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0443\u0440"})]})})})};var k=function(){var e=Object(d.g)();Object(c.useEffect)((function(){localStorage.getItem("accessToken")||e.push("/login")}),[]);var t=g.c().shape({name:g.d().required("\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!"),city:g.d().required("\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0433\u043e\u0440\u043e\u0434!"),starRating:g.b().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0437\u0432\u0435\u0437\u0434\u0443").min(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u2013 1.").max(5,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 - 5")});return Object(m.jsx)("div",{className:"createPostPage",children:Object(m.jsx)(f.d,{initialValues:{name:"",city:"",starRating:1},onSubmit:function(t){console.log(t),O.a.post("https://course-project-75u9.onrender.com/hotels",t,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(t){t.data.error;200===t.status&&j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041e\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d",confirmButtonColor:"#fe6401"}).then((function(){e.push("/")}))})).catch((function(e){var t=e.response.data.error;console.log(e),400===e.response.status||409===e.response.status||404===e.response.status?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t,confirmButtonColor:"#fe6401"}):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0435\u043b\u044c",confirmButtonColor:"#fe6401"})}))},validationSchema:t,children:Object(m.jsxs)(f.c,{className:"formContainer",children:[Object(m.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: "}),Object(m.jsx)(f.a,{name:"name",component:"span"}),Object(m.jsx)(f.b,{autoComplete:"off",id:"inputCreatePost",name:"name",placeholder:"(SuperHotel)"}),Object(m.jsx)(f.a,{name:"city",component:"span"}),Object(m.jsx)(f.b,{autoComplete:"off",id:"inputCreatePost",name:"city",placeholder:"(\u0421\u0442\u043e\u043b\u0431\u0446\u044b)"}),Object(m.jsx)(f.a,{name:"starRating",component:"span"}),Object(m.jsxs)(f.b,{as:"select",name:"starRating",children:[Object(m.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0432\u0435\u0437\u0434\u044b"}),Object(m.jsx)("option",{value:1,children:"1"}),Object(m.jsx)("option",{value:2,children:"2"}),Object(m.jsx)("option",{value:3,children:"3"}),Object(m.jsx)("option",{value:4,children:"4"}),Object(m.jsx)("option",{value:5,children:"5"})]}),Object(m.jsx)("button",{type:"submit",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041e\u0442\u0435\u043b\u044c "})]})})})},S=n(24),C=n(6),I=n(12),T=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)([]),a=Object(s.a)(o,2),l=a[0],u=a[1],b=Object(c.useState)(null),h=Object(s.a)(b,2),f=h[0],x=h[1],g=Object(c.useState)({}),v=Object(s.a)(g,2),k=v[0],T=v[1],y=Object(c.useState)({}),w=Object(s.a)(y,2),D=(w[0],w[1]),B=Object(c.useState)(""),N=Object(s.a)(B,2),P=(N[0],N[1],Object(c.useContext)(p).authState,Object(d.g)());Object(c.useEffect)((function(){localStorage.getItem("accessToken")?A():(console.log(localStorage.getItem("accessToken")),P.push("/login"))}),[]);var A=function(){var e=Object(I.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/tours",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?P.push("/login"):(console.log(e.data),r(e.data))})),O.a.get("https://course-project-75u9.onrender.com/hotels",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?P.push("/login"):(console.log(e.data),u(e.data))}))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){x(null),T({})},R=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){var n;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(k).length>0){e.next=4;break}return j.a.fire({icon:"info",title:"\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439",text:"\u0412\u044b \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.",confirmButtonColor:"#fe6401"}),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.a.put("https://course-project-75u9.onrender.com/tours/edit/".concat(t),k,{headers:{accessToken:localStorage.getItem("accessToken")}});case 7:j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0422\u0443\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"}),x(null),A(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c.",e.t0.response&&400===e.t0.response.status?n="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b":e.t0.response&&404===e.t0.response.status?n="\u0422\u0443\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d":e.t0.response&&409===e.t0.response.status?n="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430 \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442\u043e":e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(n=e.t0.response.data.error),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:n,confirmButtonColor:"#fe6401"});case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e,t){var n=e.target,c=n.name,r=n.value;"name"!==c||""!==r.trim()?"priceOneDay"===c&&(r<0||isNaN(r))?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435\u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c",confirmButtonColor:"#fe6401"}):T(Object(i.a)(Object(i.a)({},k),{},Object(S.a)({},c,r))):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",confirmButtonColor:"#fe6401"})},q=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/tours/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:200===e.sent.status?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0422\u0443\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",confirmButtonColor:"#fe6401"}),A()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0443\u0440",confirmButtonColor:"#fe6401"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0443\u0440",confirmButtonColor:"#fe6401"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"\u0418\u043c\u044f"}),Object(m.jsx)("th",{children:"\u0426\u0435\u043d\u0430 \u0432 \u0434\u0435\u043d\u044c"}),Object(m.jsx)("th",{children:"\u041e\u0442\u0435\u043b\u044c"}),Object(m.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(m.jsx)("tbody",{children:n.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.id}),Object(m.jsx)("td",{children:f===e.id?Object(m.jsx)("input",{type:"text",name:"name",value:k.name||e.name,onChange:function(t){return F(t,e.id)}}):e.name}),Object(m.jsx)("td",{children:f===e.id?Object(m.jsx)("input",{type:"number",name:"priceOneDay",min:1,value:k.priceOneDay||e.priceOneDay,onChange:function(t){return F(t,e.id)}}):e.priceOneDay}),Object(m.jsx)("td",{children:f===e.id?Object(m.jsx)("select",{name:"hotelId",value:k.hotelId||e.hotelId,onChange:function(t){return F(t,e.id)},children:l.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))}):e.Hotel.name}),Object(m.jsx)("td",{children:f===e.id?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return R(e.id)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:E,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return t=e.id,n={id:e.id,name:e.name,priceOneDay:e.priceOneDay,hotelId:e.hotelId},x(t),T(n),void D(n);var t,n},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:function(){return q(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]},e.id)}))})]})};var y=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],u=(Object(c.useContext)(p).authState,Object(d.g)());return Object(c.useEffect)((function(){try{localStorage.getItem("accessToken")?O.a.get("https://course-project-75u9.onrender.com/tours",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?u.push("/login"):r(e.data)})):(console.log(localStorage.getItem("accessToken")),u.push("/login"))}catch(e){console.log(e),u.push("/")}}),[]),Object(m.jsx)("div",{children:n.length>0?Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"text",placeholder:"Search by tour name...",value:i,onChange:function(e){return l(e.target.value)}}),Object(m.jsx)("table",{children:Object(m.jsx)("tbody",{children:n.filter((function(e){return new RegExp("^".concat(i),"i").test(e.name)})).map((function(e){return Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{children:[Object(m.jsx)("h1",{children:e.name}),Object(m.jsxs)("h2",{children:["\u041e\u0442\u0435\u043b\u044c:",e.Hotel.name]}),Object(m.jsxs)("h2",{children:["\u0426\u0435\u043d\u0430 \u0437\u0430 \u0434\u0435\u043d\u044c:",e.priceOneDay]})]})},e.id)}))})})]}):Object(m.jsx)("h1",{children:"\u0422\u0430\u043a\u0438\u0445 \u0442\u0443\u0440\u043e\u0432 \u043d\u0435\u0442"})})};var w=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],u=(Object(c.useContext)(p).authState,Object(d.g)());return Object(c.useEffect)((function(){try{localStorage.getItem("accessToken")?O.a.get("https://course-project-75u9.onrender.com/hotels",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?u.push("/login"):r(e.data)})):(console.log(localStorage.getItem("accessToken")),u.push("/login"))}catch(e){console.log(e),u.push("/")}}),[]),Object(m.jsx)("div",{children:n.length>0?Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"text",placeholder:"Search by hotel name...",value:i,onChange:function(e){return l(e.target.value)}}),Object(m.jsx)("table",{children:Object(m.jsx)("tbody",{children:n.filter((function(e){return new RegExp("^".concat(i),"i").test(e.name)})).map((function(e){return Object(m.jsx)("tr",{children:Object(m.jsxs)("td",{children:[Object(m.jsx)("h1",{children:e.name}),Object(m.jsxs)("h2",{children:["\u0413\u043e\u0440\u043e\u0434:",e.city]})]})},e.id)}))})})]}):Object(m.jsx)("h1",{children:"\u041e\u0442\u0435\u043b\u0435\u0439 \u043d\u0435\u0442"})})},D=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)([]),a=Object(s.a)(o,2),l=a[0],u=a[1],b=Object(c.useState)([]),h=Object(s.a)(b,2),f=h[0],x=h[1],g=Object(c.useState)(null),v=Object(s.a)(g,2),k=v[0],T=v[1],y=Object(c.useState)({}),w=Object(s.a)(y,2),D=w[0],B=w[1],N=Object(c.useState)({}),P=Object(s.a)(N,2),A=(P[0],P[1]),E=Object(c.useState)(""),R=Object(s.a)(E,2),F=(R[0],R[1],Object(c.useContext)(p).authState,Object(d.g)());Object(c.useEffect)((function(){localStorage.getItem("accessToken")?q():F.push("/login")}),[]);var q=function(){var e=Object(I.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/bookings",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){void 0!=e.data.error?F.push("/login"):(console.log("bookings"),console.log(e.data),r(e.data))})),O.a.get("https://course-project-75u9.onrender.com/tours",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){void 0!=e.data.error?F.push("/login"):x(e.data)})),O.a.get("https://course-project-75u9.onrender.com/auth/bookings",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){void 0!=e.data.error?F.push("/login"):u(e.data)}))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){T(null),B({})},L=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){var n;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(D).length>0){e.next=4;break}return j.a.fire({icon:"info",title:"\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",text:"\u0412\u044b \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439."}),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.a.put("https://course-project-75u9.onrender.com/bookings/edit/".concat(t),D,{headers:{accessToken:localStorage.getItem("accessToken")}});case 7:j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e"}),T(null),q(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",e.t0.response&&400===e.t0.response.status?n="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b":e.t0.response&&404===e.t0.response.status?n="\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e":e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(n=e.t0.response.data.error),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:n});case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),H=function(e,t){var n=e.target,c=n.name,r=n.value;B((function(e){var t;return Object(i.a)(Object(i.a)({},e),{},(t={},Object(S.a)(t,c,r),Object(S.a)(t,"fromDate","fromDate"===c?r:e.fromDate),Object(S.a)(t,"toDate","toDate"===c?r:e.toDate),t))})),"numberOfDays"===c&&(r<0||isNaN(r))?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435\u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c"}):B(Object(i.a)(Object(i.a)({},D),{},Object(S.a)({},c,r)))},G=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/bookings/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:200===e.sent.status?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e",confirmButtonColor:"#fe6401"}),q()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",confirmButtonColor:"#fe6401"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",confirmButtonColor:"#fe6401"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:null===n?Object(m.jsx)("p",{children:"\u041d\u0435\u0442 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439"}):Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"\u0418\u043c\u044f \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044f"}),Object(m.jsx)("th",{children:"\u0422\u0443\u0440"}),Object(m.jsx)("th",{children:"\u0414\u0430\u0442\u0430 \u0441"}),Object(m.jsx)("th",{children:"\u0414\u0430\u0442\u0430 \u043f\u043e"}),Object(m.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(m.jsx)("tbody",{children:n.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.id}),Object(m.jsx)("td",{children:k===e.id?Object(m.jsx)("select",{name:"userId",value:D.userId||e.userId,onChange:function(t){return H(t,e.id)},children:l.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.username},e.id)}))}):e.User.username}),Object(m.jsx)("td",{children:k===e.id?Object(m.jsx)("select",{name:"tourId",value:D.tourId||e.tourId,onChange:function(t){return H(t,e.id)},children:f.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))}):e.Tour.name}),Object(m.jsx)("td",{children:new Date(e.fromDate).toLocaleDateString("en-GB")}),Object(m.jsx)("td",{children:new Date(e.toDate).toLocaleDateString("en-GB")}),Object(m.jsx)("td",{children:k===e.id?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return L(e.id)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:V,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return t=e.id,n={id:e.id,numberOfDays:e.numberOfDays,tourId:e.tourId,userId:e.userId},T(t),B(n),void A(n);var t,n},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:function(){return G(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]},e.id)}))})]})})};var B=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useContext)(p).authState,a=Object(d.g)();Object(c.useEffect)((function(){localStorage.getItem("accessToken")||a.push("/login"),O.a.get("https://course-project-75u9.onrender.com/tours/",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data),r(e.data)}))}),[]);var i=g.c().shape({tourId:g.b().required("Required"),fromDate:g.a().min(new Date,"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u043d\u044c\u0448\u0435 \u0437\u0430\u0432\u0442\u0440\u0430").test({name:"fromDate",exclusive:!1,message:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u0437\u0436\u0435 \u0434\u0430\u0442\u044b \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",test:function(e){var t=this.parent.toDate;return!t||e<=t}}),toDate:g.a().min(new Date,"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u043d\u044c\u0448\u0435 \u0437\u0430\u0432\u0442\u0440\u0430").test({name:"toDate",exclusive:!1,message:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0440\u0430\u043d\u044c\u0448\u0435 \u0434\u0430\u0442\u044b \u043d\u0430\u0447\u0430\u043b\u0430",test:function(e){var t=this.parent.fromDate;return!t||e>=t}})});return Object(m.jsx)("div",{className:"createPostPage",children:Object(m.jsx)(f.d,{initialValues:{tourId:1,fromDate:"",toDate:""},onSubmit:function(e){var t={userId:o.id,tourId:e.tourId,fromDate:e.fromDate,toDate:e.toDate};O.a.post("https://course-project-75u9.onrender.com/bookings",t,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){200===e.status&&j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e",confirmButtonColor:"#fe6401"}).then((function(){a.push("/")}))})).catch((function(e){var t=e.response.data.error;console.log(e),400===e.response.status||409===e.response.status||404===e.response.status?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t,confirmButtonColor:"#fe6401"}):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0443",confirmButtonColor:"#fe6401"})}))},validationSchema:i,children:Object(m.jsxs)(f.c,{className:"formContainer",children:[Object(m.jsx)(f.a,{name:"tourId",component:"span"}),Object(m.jsxs)(f.b,{as:"select",name:"tourId",children:[Object(m.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0443\u0440"}),n.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(m.jsx)(f.a,{name:"fromDate",component:"span",className:"error"}),Object(m.jsx)("label",{children:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430:"}),Object(m.jsx)(f.b,{type:"date",name:"fromDate",className:"inputCreatePost"}),Object(m.jsx)(f.a,{name:"toDate",component:"span",className:"error"}),Object(m.jsx)("label",{children:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f:"}),Object(m.jsx)(f.b,{type:"date",name:"toDate",className:"inputCreatePost"}),Object(m.jsx)("button",{type:"submit",children:" \u041a\u0443\u043f\u0438\u0442\u044c \u0442\u0443\u0440"})]})})})},N=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),a=Object(s.a)(o,2),i=a[0],l=a[1],u=Object(c.useState)({}),b=Object(s.a)(u,2),h=b[0],f=b[1],x=(Object(c.useContext)(p).authState,Object(d.g)());Object(c.useEffect)((function(){localStorage.getItem("accessToken")?g():(console.log(localStorage.getItem("accessToken")),x.push("/login"))}),[]);var g=function(){var e=Object(I.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/auth/",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?x.push("/login"):r(e.data)}))}catch(t){console.log(t),x.push("/")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){l(null),f({})},k=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){var n;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(h).length>0){e.next=4;break}return j.a.fire({icon:"info",title:"\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",text:"\u0412\u044b \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.",confirmButtonColor:"#fe6401"}),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.a.put("https://course-project-75u9.onrender.com/auth/".concat(t),h,{headers:{accessToken:localStorage.getItem("accessToken")}});case 7:j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d",confirmButtonColor:"#fe6401"}),l(null),g(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",e.t0.response&&400===e.t0.response.status?n="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b":e.t0.response&&404===e.t0.response.status?n="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d":e.t0.response&&409===e.t0.response.status?n="\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0443\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f":e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(n=e.t0.response.data.error),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:n,confirmButtonColor:"#fe6401"});case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/auth/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"===e.sent.data.message?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",confirmButtonColor:"#fe6401"}),g()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",confirmButtonColor:"#fe6401"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",confirmButtonColor:"#fe6401"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(m.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(m.jsx)("tbody",{children:n.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.id}),Object(m.jsx)("td",{children:e.username}),Object(m.jsx)("td",{children:i===e.id?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return k(e.id)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:v,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("button",{onClick:function(){return S(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})})]},e.id)}))})]})},P=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),a=Object(s.a)(o,2),l=a[0],u=a[1],b=Object(c.useState)({}),h=Object(s.a)(b,2),f=h[0],x=h[1],g=Object(c.useState)({}),v=Object(s.a)(g,2),k=(v[0],v[1]),T=Object(c.useState)(""),y=Object(s.a)(T,2),w=(y[0],y[1],Object(c.useContext)(p).authState,Object(d.g)());Object(c.useEffect)((function(){localStorage.getItem("accessToken")?D():(console.log(localStorage.getItem("accessToken")),w.push("/login"))}),[]);var D=function(){var e=Object(I.a)(Object(C.a)().mark((function e(){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/hotels",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?w.push("/login"):(console.log(e.data),r(e.data))}))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){u(null),x({})},N=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){var n;return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(f).length>0){e.next=4;break}return j.a.fire({icon:"info",title:"\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",text:"\u0412\u044b \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439."}),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.a.put("https://course-project-75u9.onrender.com/hotels/edit/".concat(t),f,{headers:{accessToken:localStorage.getItem("accessToken")}});case 7:j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041e\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"}),u(null),D(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c.",e.t0.response&&400===e.t0.response.status?n="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b":e.t0.response&&404===e.t0.response.status?n="\u041e\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d":e.t0.response&&409===e.t0.response.status?n="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0435\u043b\u044f \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442\u043e":e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(n=e.t0.response.data.error),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:n});case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e,t){var n=e.target,c=n.name,r=n.value;"name"!==c||""!==r.trim()?"city"!==c||""!==r.trim()?"starRating"===c&&(r<0||isNaN(r))?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435\u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c"}):x(Object(i.a)(Object(i.a)({},f),{},Object(S.a)({},c,r))):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0413\u043e\u0440\u043e\u0434 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"})},A=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/hotels/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:200===e.sent.status?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041e\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"}),D()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:null===n?Object(m.jsx)("p",{children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043e\u0442\u0435\u043b\u0435\u0439."}):Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"\u0418\u043c\u044f"}),Object(m.jsx)("th",{children:"\u0417\u0432\u0435\u0437\u0434\u044b"}),Object(m.jsx)("th",{children:"\u0413\u043e\u0440\u043e\u0434"}),Object(m.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(m.jsx)("tbody",{children:n.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.id}),Object(m.jsx)("td",{children:l===e.id?Object(m.jsx)("input",{type:"text",name:"name",value:f.name||e.name,onChange:function(t){return P(t,e.id)}}):e.name}),Object(m.jsx)("td",{children:l===e.id?Object(m.jsx)("input",{type:"number",name:"starRating",min:1,max:5,value:f.starRating||e.starRating,onChange:function(t){return P(t,e.id)}}):e.starRating}),Object(m.jsx)("td",{children:l===e.id?Object(m.jsx)("input",{type:"text",name:"city",value:f.city||e.city,onChange:function(t){return P(t,e.id)}}):e.city}),Object(m.jsx)("td",{children:l===e.id?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(e.id)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:B,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return t=e.id,n={id:e.id,name:e.name,starRating:e.starRating,city:e.city},u(t),x(n),void k(n);var t,n},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(m.jsx)("button",{onClick:function(){return A(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]},e.id)}))})]})})};var A=function(){var e=Object(d.g)(),t=g.c().shape({username:g.d().min(3,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(15,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043f\u043e\u043b\u0435\u043c"),password:g.d().min(4,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 4 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(20,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041f\u0430\u0440\u043e\u043b\u044c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043f\u043e\u043b\u0435\u043c")});return Object(m.jsx)("div",{className:"registr-page",children:Object(m.jsx)(f.d,{initialValues:{username:"",password:""},onSubmit:function(t){O.a.post("https://course-project-75u9.onrender.com/auth",t).then((function(t){console.log("Registration successful"),e.push("/login")})).catch((function(e){e.response&&409===e.response.status?j.a.fire({icon:"error",title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043d",confirmButtonColor:"#fe6401"}):j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"})}))},validationSchema:t,children:Object(m.jsxs)(f.c,{className:"formContainer",children:[Object(m.jsx)("h1",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(m.jsx)("label",{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: "}),Object(m.jsx)(f.a,{name:"username",component:"span"}),Object(m.jsx)(f.b,{autoComplete:"off",id:"inputCreatePost",name:"username",placeholder:"(alexxx111)"}),Object(m.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c: "}),Object(m.jsx)(f.a,{name:"password",component:"span"}),Object(m.jsx)(f.b,{autoComplete:"off",type:"password",id:"inputCreatePost",name:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("button",{type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})})};var E=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],u=Object(c.useContext)(p).setAuthState,b=Object(d.g)();return Object(m.jsx)("div",{className:"loginContainer",children:Object(m.jsx)(f.d,{initialValues:{username:"",password:""},children:Object(m.jsxs)(f.c,{className:"formContainer",children:[Object(m.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(m.jsx)("label",{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"}),Object(m.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",onChange:function(e){r(e.target.value)}}),Object(m.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(m.jsx)("input",{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){l(e.target.value)}}),Object(m.jsx)("button",{onClick:function(){return function(){var e={username:n,password:i};O.a.post("https://course-project-75u9.onrender.com/auth/login",e).then((function(e){localStorage.setItem("accessToken",e.data.token),localStorage.setItem("isAdmin",e.data.isAdmin),u({username:e.data.username,id:e.data.id,status:!0,isAdmin:e.data.isAdmin}),b.push("/login")})).catch((function(e){e.response&&409===e.response.status?j.a.fire({icon:"error",title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043d",confirmButtonColor:"#fe6401"}):e.response&&401===e.response.status?j.a.fire({icon:"error",title:"\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u044f \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044f",confirmButtonColor:"#fe6401"}):e.response&&404===e.response.status?j.a.fire({icon:"error",title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",confirmButtonColor:"#fe6401"}):j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"})}))}()},children:" \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f "})]})})})};var R=function(){var e=Object(d.g)(),t=Object(c.useState)(5),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){var t=r>0&&setTimeout((function(){o(r-1)}),1e3);return 0===r&&e.push("/"),function(){return clearTimeout(t)}}),[r,e]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(m.jsxs)("p",{children:["\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0447\u0435\u0440\u0435\u0437 ",r," \u0441\u0435\u043a\u0443\u043d\u0434."]})]})};var F=function(){var e=Object(d.g)(),t=Object(c.useState)(5),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){var t=r>0&&setTimeout((function(){o(r-1)}),1e3);return 0===r&&e.push("/"),function(){return clearTimeout(t)}}),[r,e]),Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"\u0412\u0430\u043c \u043d\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u043f\u043e\u0441\u0435\u0449\u0430\u0442\u044c \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}),Object(m.jsxs)("p",{children:["\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0447\u0435\u0440\u0435\u0437 ",r," \u0441\u0435\u043a\u0443\u043d\u0434."]})]})};var q=function(){var e=Object(d.h)().id,t=Object(d.g)(),n=Object(c.useState)([]),r=Object(s.a)(n,2),o=r[0],a=r[1],i=Object(c.useState)(""),l=Object(s.a)(i,2),u=l[0],b=l[1],h=Object(c.useContext)(p).authState;Object(c.useEffect)((function(){try{localStorage.getItem("accessToken")?f():t.push("/login")}catch(e){t.push("/")}}),[]);var f=function(){var t=Object(I.a)(Object(C.a)().mark((function t(){return Object(C.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/auth/basicinfo/".concat(e),{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){null==e.data?b(null):b(e.data.username)})).catch((function(e){console.error(e)})),O.a.get("https://course-project-75u9.onrender.com/bookings/byUserId/".concat(e),{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){null==e.data?a(null):(console.log(e.data),a(e.data))})).catch((function(e){console.error(e)}))}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Object(I.a)(Object(C.a)().mark((function e(t){return Object(C.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/bookings/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:200===e.sent.status?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e",confirmButtonColor:"#fe6401"}),f()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",confirmButtonColor:"#fe6401"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",confirmButtonColor:"#fe6401"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"profilePageContainer1",children:null!=u?Object(m.jsx)("div",{className:"profilePageContainer",children:Object(m.jsxs)("div",{className:"basicInfo",children:[" ",Object(m.jsxs)("div",{className:"formContainer",children:[Object(m.jsxs)("h1",{children:[" \u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ",u," "]}),h.username===u&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("button",{onClick:function(){t.push("/changepassword")},children:[" ","\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"]}),Object(m.jsx)("div",{children:0==o.length?Object(m.jsx)("p",{children:"\u041d\u0435\u0442 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439"}):Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"\u0414\u0430\u0442\u0430"}),Object(m.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430"}),Object(m.jsx)("th",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0435\u043b\u044f"}),Object(m.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(m.jsx)("tbody",{children:o.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{children:["\u041d\u0430\u0447\u0430\u043b\u043e",Object(m.jsx)("p",{children:new Date(e.fromDate).toLocaleDateString("en-GB")}),"\u041a\u043e\u043d\u0435\u0446",Object(m.jsx)("p",{children:new Date(e.toDate).toLocaleDateString("en-GB")})]}),Object(m.jsx)("td",{children:e.Tour.name}),Object(m.jsx)("td",{children:e.Tour.Hotel.name}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{onClick:function(){return x(e.id)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"})})]},e.id)}))})]})})]})]})]})}):Object(m.jsx)("h2",{children:"\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})};var V=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],u=Object(d.g)(),b=g.c().shape({newPassword:g.d().min(4,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 4 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(20,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041f\u0430\u0440\u043e\u043b\u044c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043f\u043e\u043b\u0435\u043c"),oldPassword:g.d().required("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c")});return Object(m.jsx)("div",{className:"ChangePassword-page",children:Object(m.jsx)(f.d,{initialValues:{oldPassword:"",newPassword:""},validationSchema:b,children:Object(m.jsxs)(f.c,{className:"formContainer",children:[Object(m.jsx)("h1",{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)(f.a,{name:"oldPassword",component:"span"}),Object(m.jsx)("input",{type:"password",name:"oldPassword",placeholder:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){r(e.target.value)}}),Object(m.jsx)(f.a,{name:"newPassword",component:"span"}),Object(m.jsx)("input",{autoComplete:"off",type:"password",name:"newPassword",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){l(e.target.value)}}),Object(m.jsx)("button",{onClick:function(){O.a.put("https://course-project-75u9.onrender.com/auth/changepassword",{oldPassword:n,newPassword:i},{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"}),u.push("/")})).catch((function(e){if(e.response){var t=e.response.data.error;j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t,confirmButtonColor:"#fe6401"})}else j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"})}))},children:" \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f "})]})})})},L=n(14),H=n(130),G=n.n(H);var M=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)([]),a=Object(s.a)(o,2),i=a[0],l=a[1],u=Object(c.useRef)(),d=Object(c.useRef)(null),b=Object(c.useContext)(p).authState,h=function(){d.current&&d.current.scrollIntoView({behavior:"smooth"})};return Object(c.useEffect)((function(){var e=localStorage.getItem("accessToken");return h(),u.current=G()("https://course-project-75u9.onrender.com",{transports:["websocket"],auth:{token:e}}),u.current.on("allMessages",(function(t){console.log(e),l(t)})),u.current.on("newMessage",(function(t){console.log(e),l((function(e){return[].concat(Object(L.a)(e),[t])})),h()})),function(){u.current.disconnect()}}),[]),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"Chat-page",children:[i.map((function(e,t){return Object(m.jsxs)("div",{style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap"},children:[e.author,":",e.text]},t)})),Object(m.jsx)("div",{ref:d})]}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==n.trim()?(u.current.emit("newMessage",{text:n,author:b.username}),h(),r("")):(j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u043f\u0443\u0441\u0442\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443",confirmButtonColor:"#fe6401"}),r(""))},children:[Object(m.jsx)("input",{type:"text",placeholder:"Type your message",value:n,onChange:function(e){var t=e.target.value;t.length<=150&&r(t)}}),Object(m.jsx)("button",{type:"submit",children:" \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "})]})]})},J=["component"],U=["component"],W=["component","isAdmin"];var $=function(){var e=null!=localStorage.getItem("accessToken"),t=function(t){var n=t.component,c=Object(l.a)(t,J);return e=null!=localStorage.getItem("accessToken"),console.log("isauth"),console.log(e),Object(m.jsx)(d.b,Object(i.a)(Object(i.a)({},c),{},{render:function(t){return e?Object(m.jsx)(d.a,{to:"/"}):Object(m.jsx)(n,Object(i.a)({},t))}}))},n=function(t){var n=t.component,c=Object(l.a)(t,U);return e=null!=localStorage.getItem("accessToken"),console.log("statea auth"),console.log(e),e||Z(Object(i.a)(Object(i.a)({},Y),{},{status:!1})),Object(m.jsx)(d.b,Object(i.a)(Object(i.a)({},c),{},{render:function(t){return e?Object(m.jsx)(n,Object(i.a)({},t)):Object(m.jsx)(d.a,{to:"/login"})}}))},r=function(e){var t=e.component,n=(e.isAdmin,Object(l.a)(e,W)),c=null!==localStorage.getItem("accessToken");return localStorage.getItem("isAdmin"),console.log(localStorage.getItem("isAdmin")),Object(m.jsx)(d.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return c&&Y.isAdmin?Object(m.jsx)(t,Object(i.a)({},e)):Object(m.jsx)(F,{})}}))},o=Object(d.i)(A),a=Object(d.i)(E),u=Object(d.i)(M),h=Object(d.i)(x),f=Object(d.i)(k),g=Object(d.i)(B),S=Object(d.i)(v),C=Object(d.i)(N),I=Object(d.i)(D),L=Object(d.i)(T),H=Object(d.i)(P),G=Object(d.i)(y),$=Object(d.i)(w),z=Object(d.i)(q),K=Object(d.i)(V),Q=Object(c.useState)({username:"",id:0,status:!1,isAdmin:localStorage.getItem("isAdmin")}),X=Object(s.a)(Q,2),Y=X[0],Z=X[1];return Object(d.g)(),Object(c.useEffect)((function(){O.a.get("https://course-project-75u9.onrender.com/auth/auth",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data),e.data.error?(localStorage.removeItem("accessToken"),Z(Object(i.a)(Object(i.a)({},Y),{},{status:!1})),"jwt expired"==e.data.error?j.a.fire({icon:"warning",title:"\u0421\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u0430!",text:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0441\u043d\u043e\u0432\u0430"}).then((function(){window.location.replace("/login")})):j.a.fire({icon:"error",title:"\u0423\u043f\u0441",text:e.data.error})):Z({username:e.data.username,id:e.data.id,status:!0,isAdmin:e.data.isAdmin})})).catch((function(e){localStorage.removeItem("accessToken")}))}),[]),Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(p.Provider,{value:{authState:Y,setAuthState:Z},children:Object(m.jsxs)(b.a,{children:[Object(m.jsxs)("div",{className:"navbar",children:[Object(m.jsx)("div",{className:"links",children:Y.status?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.b,{to:"/",children:" \u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 "}),Object(m.jsx)(b.b,{to:"/addbooking",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(m.jsx)(b.b,{to:"/tours",children:" \u0412\u0441\u0435 \u0442\u0443\u0440\u044b"}),Object(m.jsx)(b.b,{to:"/hotels",children:" \u0412\u0441\u0435 \u043e\u0442\u0435\u043b\u0438"}),Object(m.jsx)(b.b,{to:"/chat",children:" \u041e\u0431\u0449\u0438\u0439 \u0447\u0430\u0442 \u0441 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439"}),Y.isAdmin&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.b,{to:"/userstable",children:" \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 "}),Object(m.jsx)(b.b,{to:"/hotelstable",children:" \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0442\u0435\u043b\u0435\u0439"}),Object(m.jsx)(b.b,{to:"/bookingstable",children:" \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(m.jsx)(b.b,{to:"/tourstable",children:"   \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0442\u0443\u0440\u043e\u0432 "}),Object(m.jsx)(b.b,{to:"/addhotel",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c"}),Object(m.jsx)(b.b,{to:"/addtour",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0443\u0440"})]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b.b,{to:"/login",children:" \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f "}),Object(m.jsx)(b.b,{to:"/registration",children:" \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f "})]})}),Object(m.jsxs)("div",{className:"loggedInContainer",children:[Object(m.jsx)("h1",{children:Object(m.jsx)(b.b,{to:"/profile/"+Y.id,children:Y.username})}),Y.status&&Object(m.jsx)("button",{onClick:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("isAdmin"),Z({username:"",id:0,status:!1}),d.a},children:" \u0412\u044b\u0439\u0442\u0438 "})]})]}),Object(m.jsxs)(d.d,{children:[Object(m.jsx)(t,{path:"/registration",exact:!0,component:o}),Object(m.jsx)(t,{path:"/login",exact:!0,component:a}),Object(m.jsx)(n,{path:"/",exact:!0,component:h}),Object(m.jsx)(n,{path:"/chat",exact:!0,component:u}),Object(m.jsx)(n,{path:"/addbooking",exact:!0,component:g}),Object(m.jsx)(n,{path:"/tours",exact:!0,component:G}),Object(m.jsx)(n,{path:"/hotels",exact:!0,component:$}),Object(m.jsx)(r,{path:"/userstable",exact:!0,component:C}),Object(m.jsx)(r,{path:"/hotelstable",exact:!0,component:H}),Object(m.jsx)(r,{path:"/tourstable",exact:!0,component:L}),Object(m.jsx)(r,{path:"/bookingstable",exact:!0,component:I}),Object(m.jsx)(r,{path:"/addhotel",exact:!0,component:f}),Object(m.jsx)(r,{path:"/addtour",exact:!0,component:S}),Object(m.jsx)(n,{path:"/profile/:id",exact:!0,component:z}),Object(m.jsx)(n,{path:"/changepassword",exact:!0,component:K}),Object(m.jsx)(d.b,{path:"*",exact:!0,component:R})]})]})})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,290)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)($,{})}),document.getElementById("root")),z()}},[[289,1,2]]]);
//# sourceMappingURL=main.ebaea752.chunk.js.map