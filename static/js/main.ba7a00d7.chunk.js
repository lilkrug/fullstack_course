(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(124),a=n.n(o),s=n(3),i=n(8),u=n(59),l=(n(135),n(2)),j=n.n(l),d=n(9),b=n(7),h=n(4),O=n.n(h),p=Object(c.createContext)(""),x=n(5),f=n(0);var m=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=(Object(c.useContext)(p).authState,Object(d.g)());return Object(c.useEffect)((function(){localStorage.getItem("accessToken")?O.a.get("https://course-project-75u9.onrender.com/tours",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){401===e.status?j.a.fire({icon:"error",title:"\u041d\u0435\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439",text:"\u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0442\u043e\u043a\u0435\u043d\u0430 \u0438\u0441\u0442\u0435\u043a",confirmButtonColor:"#fe6401"}).then((function(){localStorage.removeItem("accessToken"),o.push("/login")})):void 0!=e.data.error?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:e.data.error,confirmButtonColor:"#fe6401"}).then((function(){localStorage.removeItem("accessToken"),o.push("/login")})):r(e.data)})).catch((function(e){j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"}).then((function(){localStorage.removeItem("accessToken"),o.push("/login")}))})):j.a.fire({icon:"error",title:"\u041d\u0435\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0439",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d!",confirmButtonColor:"#fe6401"}).then((function(){localStorage.removeItem("accessToken"),o.push("/login")}))}),[]),Object(f.jsx)("div",{className:"home-page",children:Object(f.jsx)("div",{children:Object(f.jsx)("div",{className:"formContainer",children:n.map((function(e,t){return Object(f.jsxs)("div",{className:"tourItem",children:[Object(f.jsx)("h3",{children:e.name}),Object(f.jsxs)("p",{children:["\u0426\u0435\u043d\u0430 \u0437\u0430 \u0434\u0435\u043d\u044c: $",e.priceOneDay]}),Object(f.jsxs)("p",{children:["\u0413\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430: ",e.Hotel.name]})]},t)}))})})})},g=n(13);var v=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(d.g)();Object(c.useEffect)((function(){localStorage.getItem("accessToken")||o.push("/login"),O.a.get("https://course-project-75u9.onrender.com/hotels/",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data),r(e.data)}))}),[]);var a=g.b().shape({name:g.c().required("\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!"),hotelId:g.a().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0442\u0435\u043b\u044c"),priceOneDay:g.a().required("\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0446\u0435\u043d\u0443").min(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u2013 10.")});return Object(f.jsx)("div",{className:"createPostPage",children:Object(f.jsx)(x.d,{initialValues:{name:"",priceOneDay:100},onSubmit:function(e){console.log(e),O.a.post("https://course-project-75u9.onrender.com/tours",e,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){200===e.status&&j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0422\u0443\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"}).then((function(){o.push("/")}))})).catch((function(e){var t=e.response.data.error;console.log(e),400===e.response.status||409===e.response.status||404===e.response.status?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t}):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0443\u0440."})}))},validationSchema:a,children:Object(f.jsxs)(x.c,{className:"formContainer",children:[Object(f.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430: "}),Object(f.jsx)(x.a,{name:"name",component:"span"}),Object(f.jsx)(x.b,{autoComplete:"off",id:"inputCreatePost",name:"name",placeholder:"\u0415\u0433\u0438\u043f\u0435\u0442"}),Object(f.jsx)("label",{children:"\u041e\u0442\u0435\u043b\u044c: "}),Object(f.jsx)(x.a,{name:"hotelId",component:"span"}),Object(f.jsxs)(x.b,{as:"select",name:"hotelId",children:[Object(f.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0435\u043b\u044c"}),n.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(f.jsx)("label",{children:"\u0426\u0435\u043d\u0430 \u0432 \u0434\u0435\u043d\u044c: "}),Object(f.jsx)(x.a,{name:"priceOneDay",component:"span"}),Object(f.jsx)(x.b,{type:"number",id:"inputCreatePost",name:"priceOneDay",placeholder:"100"}),Object(f.jsx)("button",{type:"submit",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0443\u0440"})]})})})};var k=function(){var e=Object(d.g)();Object(c.useEffect)((function(){localStorage.getItem("accessToken")||e.push("/login")}),[]);var t=g.b().shape({name:g.c().required("\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435!"),city:g.c().required("\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0433\u043e\u0440\u043e\u0434!"),starRating:g.a().required("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0437\u0432\u0435\u0437\u0434\u0443").min(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u2013 1.").max(5,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 - 5")});return Object(f.jsx)("div",{className:"createPostPage",children:Object(f.jsx)(x.d,{initialValues:{name:"",city:"",starRating:1},onSubmit:function(t){console.log(t),O.a.post("https://course-project-75u9.onrender.com/hotels",t,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(t){t.data.error;200===t.status&&j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041e\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"}).then((function(){e.push("/")}))})).catch((function(e){var t=e.response.data.error;console.log(e),400===e.response.status||409===e.response.status||404===e.response.status?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t}):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0435\u043b\u044c"})}))},validationSchema:t,children:Object(f.jsxs)(x.c,{className:"formContainer",children:[Object(f.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: "}),Object(f.jsx)(x.a,{name:"name",component:"span"}),Object(f.jsx)(x.b,{autoComplete:"off",id:"inputCreatePost",name:"name",placeholder:"(\u0421\u0442\u043e\u043b\u0431\u0446\u044b)"}),Object(f.jsx)(x.a,{name:"city",component:"span"}),Object(f.jsx)(x.b,{autoComplete:"off",id:"inputCreatePost",name:"city",placeholder:"(\u0421\u0442\u043e\u043b\u0431\u0446\u044b)"}),Object(f.jsx)(x.a,{name:"starRating",component:"span"}),Object(f.jsxs)(x.b,{as:"select",name:"starRating",children:[Object(f.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0432\u0435\u0437\u0434\u044b"}),Object(f.jsx)("option",{value:1,children:"1"}),Object(f.jsx)("option",{value:2,children:"2"}),Object(f.jsx)("option",{value:3,children:"3"}),Object(f.jsx)("option",{value:4,children:"4"}),Object(f.jsx)("option",{value:5,children:"5"})]}),Object(f.jsx)("button",{type:"submit",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u041e\u0442\u0435\u043b\u044c "})]})})})},S=n(31),I=n(6),y=n(11),T=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)([]),a=Object(s.a)(o,2),u=a[0],l=a[1],b=Object(c.useState)(null),h=Object(s.a)(b,2),x=h[0],m=h[1],g=Object(c.useState)({}),v=Object(s.a)(g,2),k=v[0],T=v[1],C=Object(c.useState)({}),w=Object(s.a)(C,2),D=(w[0],w[1]),N=Object(c.useState)(""),P=Object(s.a)(N,2),A=(P[0],P[1],Object(c.useContext)(p).authState,Object(d.g)());Object(c.useEffect)((function(){localStorage.getItem("accessToken")?E():(console.log(localStorage.getItem("accessToken")),A.push("/login"))}),[]);var E=function(){var e=Object(y.a)(Object(I.a)().mark((function e(){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/tours",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?A.push("/login"):(console.log(e.data),r(e.data))})),O.a.get("https://course-project-75u9.onrender.com/hotels",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?A.push("/login"):(console.log(e.data),l(e.data))}))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){m(null),T({})},F=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){var n;return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(k).length>0){e.next=4;break}return j.a.fire({icon:"info",title:"\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439",text:"\u0412\u044b \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439."}),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.a.put("https://course-project-75u9.onrender.com/tours/edit/".concat(t),k,{headers:{accessToken:localStorage.getItem("accessToken")}});case 7:j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0422\u0443\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"}),m(null),E(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c.",e.t0.response&&400===e.t0.response.status?n="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b":e.t0.response&&404===e.t0.response.status?n="\u0422\u0443\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d":e.t0.response&&409===e.t0.response.status?n="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0443\u0440\u0430 \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442\u043e":e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(n=e.t0.response.data.error),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:n});case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){var n=e.target,c=n.name,r=n.value;"name"!==c||""!==r.trim()?"priceOneDay"===c&&(r<0||isNaN(r))?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435\u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c"}):T(Object(i.a)(Object(i.a)({},k),{},Object(S.a)({},c,r))):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"})},q=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/tours/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:200===e.sent.status?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0422\u0443\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"}),E()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0443\u0440"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0443\u0440"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"ID"}),Object(f.jsx)("th",{children:"\u0418\u043c\u044f"}),Object(f.jsx)("th",{children:"\u0426\u0435\u043d\u0430 \u0432 \u0434\u0435\u043d\u044c"}),Object(f.jsx)("th",{children:"\u041e\u0442\u0435\u043b\u044c"}),Object(f.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(f.jsx)("tbody",{children:n.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.id}),Object(f.jsx)("td",{children:x===e.id?Object(f.jsx)("input",{type:"text",name:"name",value:k.name||e.name,onChange:function(t){return B(t,e.id)}}):e.name}),Object(f.jsx)("td",{children:x===e.id?Object(f.jsx)("input",{type:"number",name:"priceOneDay",min:1,value:k.priceOneDay||e.priceOneDay,onChange:function(t){return B(t,e.id)}}):e.priceOneDay}),Object(f.jsx)("td",{children:x===e.id?Object(f.jsx)("select",{name:"hotelId",value:k.hotelId||e.hotelId,onChange:function(t){return B(t,e.id)},children:u.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))}):e.Hotel.name}),Object(f.jsx)("td",{children:x===e.id?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return F(e.id)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("button",{onClick:R,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return t=e.id,n={id:e.id,name:e.name,priceOneDay:e.priceOneDay,hotelId:e.hotelId},m(t),T(n),void D(n);var t,n},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(f.jsx)("button",{onClick:function(){return q(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]},e.id)}))})]})};var C=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],u=a[1],l=(Object(c.useContext)(p).authState,Object(d.g)());return Object(c.useEffect)((function(){localStorage.getItem("accessToken")?O.a.get("https://course-project-75u9.onrender.com/tours",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?l.push("/login"):r(e.data)})):(console.log(localStorage.getItem("accessToken")),l.push("/login"))}),[]),Object(f.jsx)("div",{children:n.length>0?Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",placeholder:"Search by tour name...",value:i,onChange:function(e){return u(e.target.value)}}),Object(f.jsx)("table",{children:Object(f.jsx)("tbody",{children:n.filter((function(e){return new RegExp("^".concat(i),"i").test(e.name)})).map((function(e){return Object(f.jsx)("tr",{onClick:function(){l.push("/tour/".concat(e.id))},children:Object(f.jsxs)("td",{children:[Object(f.jsx)("h1",{children:e.name}),Object(f.jsx)("h2",{children:e.Hotel.name})]})},e.id)}))})})]}):Object(f.jsx)("h1",{children:"\u0422\u0430\u043a\u0438\u0445 \u0442\u0443\u0440\u043e\u0432 \u043d\u0435\u0442"})})};var w=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],u=a[1],l=(Object(c.useContext)(p).authState,Object(d.g)());return Object(c.useEffect)((function(){localStorage.getItem("accessToken")?O.a.get("https://course-project-75u9.onrender.com/hotels",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?l.push("/login"):r(e.data)})):(console.log(localStorage.getItem("accessToken")),l.push("/login"))}),[]),Object(f.jsx)("div",{children:n.length>0?Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",placeholder:"Search by hotel name...",value:i,onChange:function(e){return u(e.target.value)}}),Object(f.jsx)("table",{children:Object(f.jsx)("tbody",{children:n.filter((function(e){return new RegExp("^".concat(i),"i").test(e.name)})).map((function(e){return Object(f.jsx)("tr",{onClick:function(){l.push("/tour/".concat(e.id))},children:Object(f.jsxs)("td",{children:[Object(f.jsx)("h1",{children:e.name}),Object(f.jsx)("h2",{children:e.city})]})},e.id)}))})})]}):Object(f.jsx)("h1",{children:"\u041e\u0442\u0435\u043b\u0435\u0439 \u043d\u0435\u0442"})})},D=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)([]),a=Object(s.a)(o,2),u=a[0],l=a[1],b=Object(c.useState)([]),h=Object(s.a)(b,2),x=h[0],m=h[1],g=Object(c.useState)(null),v=Object(s.a)(g,2),k=v[0],T=v[1],C=Object(c.useState)({}),w=Object(s.a)(C,2),D=w[0],N=w[1],P=Object(c.useState)({}),A=Object(s.a)(P,2),E=(A[0],A[1]),R=Object(c.useState)(""),F=Object(s.a)(R,2),B=(F[0],F[1],Object(c.useContext)(p).authState,Object(d.g)());Object(c.useEffect)((function(){localStorage.getItem("accessToken")?q():B.push("/login")}),[]);var q=function(){var e=Object(y.a)(Object(I.a)().mark((function e(){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/bookings",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){void 0!=e.data.error?B.push("/login"):(console.log("bookings"),console.log(e.data),r(e.data))})),O.a.get("https://course-project-75u9.onrender.com/tours",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){void 0!=e.data.error?B.push("/login"):m(e.data)})),O.a.get("https://course-project-75u9.onrender.com/auth/bookings",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){void 0!=e.data.error?B.push("/login"):l(e.data)}))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){T(null),N({})},H=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){var n;return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(D).length>0){e.next=4;break}return j.a.fire({icon:"info",title:"\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",text:"\u0412\u044b \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439."}),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.a.put("https://course-project-75u9.onrender.com/bookings/edit/".concat(t),D,{headers:{accessToken:localStorage.getItem("accessToken")}});case 7:j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e"}),T(null),q(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",e.t0.response&&400===e.t0.response.status?n="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b":e.t0.response&&404===e.t0.response.status?n="\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e":e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(n=e.t0.response.data.error),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:n});case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),M=function(e,t){var n=e.target,c=n.name,r=n.value;"numberOfDays"===c&&(r<0||isNaN(r))?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435\u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c"}):N(Object(i.a)(Object(i.a)({},D),{},Object(S.a)({},c,r)))},J=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/bookings/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:200===e.sent.status?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041e\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"}),q()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:null===n?Object(f.jsx)("p",{children:"\u041d\u0435\u0442 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439"}):Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"ID"}),Object(f.jsx)("th",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439"}),Object(f.jsx)("th",{children:"\u0418\u043c\u044f \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044f"}),Object(f.jsx)("th",{children:"\u0422\u0443\u0440"}),Object(f.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(f.jsx)("tbody",{children:n.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.id}),Object(f.jsx)("td",{children:k===e.id?Object(f.jsx)("input",{type:"number",name:"numberOfDays",value:D.numberOfDays||e.numberOfDays,onChange:function(t){return M(t,e.id)}}):e.numberOfDays}),Object(f.jsx)("td",{children:k===e.id?Object(f.jsx)("select",{name:"userId",value:D.userId||e.userId,onChange:function(t){return M(t,e.id)},children:u.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.username},e.id)}))}):e.User.username}),Object(f.jsx)("td",{children:k===e.id?Object(f.jsx)("select",{name:"tourId",value:D.tourId||e.tourId,onChange:function(t){return M(t,e.id)},children:x.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))}):e.Tour.name}),Object(f.jsx)("td",{children:k===e.id?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return H(e.id)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("button",{onClick:V,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return t=e.id,n={id:e.id,numberOfDays:e.numberOfDays,tourId:e.tourId,userId:e.userId},T(t),N(n),void E(n);var t,n},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(f.jsx)("button",{onClick:function(){return J(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]},e.id)}))})]})})};var N=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useContext)(p).authState,a=Object(d.g)();Object(c.useEffect)((function(){localStorage.getItem("accessToken")||a.push("/login"),O.a.get("https://course-project-75u9.onrender.com/tours/",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data),r(e.data)}))}),[]);var i=g.b().shape({tourId:g.a().required("Required"),numberOfDays:g.a().required("Required").min(1,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u2013 1.")});return Object(f.jsx)("div",{className:"createPostPage",children:Object(f.jsx)(x.d,{initialValues:{tourId:1,numberOfDays:1},onSubmit:function(e){var t={userId:o.id,tourId:e.tourId,numberOfDays:e.numberOfDays};O.a.post("https://course-project-75u9.onrender.com/bookings",t,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){200===e.status&&j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430 \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"}).then((function(){a.push("/")}))})).catch((function(e){var t=e.response.data.error;console.log(e),400===e.response.status||409===e.response.status||404===e.response.status?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t}):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0443"})}))},validationSchema:i,children:Object(f.jsxs)(x.c,{className:"formContainer",children:[Object(f.jsx)(x.a,{name:"tourId",component:"span"}),Object(f.jsxs)(x.b,{as:"select",name:"tourId",children:[Object(f.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0443\u0440"}),n.map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(f.jsx)("label",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439: "}),Object(f.jsx)(x.a,{name:"priceOneDay",component:"span"}),Object(f.jsx)(x.b,{type:"number",id:"inputCreatePost",name:"numberOfDays",placeholder:"100"}),Object(f.jsx)("button",{type:"submit",children:" \u041a\u0443\u043f\u0438\u0442\u044c \u0442\u0443\u0440"})]})})})},P=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),a=Object(s.a)(o,2),i=a[0],u=a[1],l=Object(c.useState)({}),b=Object(s.a)(l,2),h=b[0],x=b[1],m=(Object(c.useContext)(p).authState,Object(d.g)());Object(c.useEffect)((function(){localStorage.getItem("accessToken")?g():(console.log(localStorage.getItem("accessToken")),m.push("/login"))}),[]);var g=function(){var e=Object(y.a)(Object(I.a)().mark((function e(){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/auth/",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?m.push("/login"):r(e.data)}))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){u(null),x({})},k=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){var n;return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(h).length>0){e.next=4;break}return j.a.fire({icon:"info",title:"\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",text:"\u0412\u044b \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439."}),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.a.put("https://course-project-75u9.onrender.com/auth/".concat(t),h,{headers:{accessToken:localStorage.getItem("accessToken")}});case 7:j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"}),u(null),g(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",e.t0.response&&400===e.t0.response.status?n="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b":e.t0.response&&404===e.t0.response.status?n="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d":e.t0.response&&409===e.t0.response.status?n="\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0443\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f":e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(n=e.t0.response.data.error),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:n});case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/auth/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"===e.sent.data.message?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"}),g()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"ID"}),Object(f.jsx)("th",{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(f.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(f.jsx)("tbody",{children:n.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.id}),Object(f.jsx)("td",{children:e.username}),Object(f.jsx)("td",{children:i===e.id?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return k(e.id)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("button",{onClick:v,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("button",{onClick:function(){return S(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})})]},e.id)}))})]})},A=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),a=Object(s.a)(o,2),u=a[0],l=a[1],b=Object(c.useState)({}),h=Object(s.a)(b,2),x=h[0],m=h[1],g=Object(c.useState)({}),v=Object(s.a)(g,2),k=(v[0],v[1]),T=Object(c.useState)(""),C=Object(s.a)(T,2),w=(C[0],C[1],Object(c.useContext)(p).authState,Object(d.g)());Object(c.useEffect)((function(){localStorage.getItem("accessToken")?D():(console.log(localStorage.getItem("accessToken")),w.push("/login"))}),[]);var D=function(){var e=Object(y.a)(Object(I.a)().mark((function e(){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/hotels",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(void 0!=e.data.error),void 0!=e.data.error?w.push("/login"):(console.log(e.data),r(e.data))}))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){l(null),m({})},P=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){var n;return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(x).length>0){e.next=4;break}return j.a.fire({icon:"info",title:"\u041d\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f",text:"\u0412\u044b \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439."}),e.abrupt("return");case 4:return e.prev=4,e.next=7,O.a.put("https://course-project-75u9.onrender.com/hotels/edit/".concat(t),x,{headers:{accessToken:localStorage.getItem("accessToken")}});case 7:j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041e\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"}),l(null),D(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),n="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c.",e.t0.response&&400===e.t0.response.status?n="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b":e.t0.response&&404===e.t0.response.status?n="\u041e\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d":e.t0.response&&409===e.t0.response.status?n="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0435\u043b\u044f \u0443\u0436\u0435 \u0437\u0430\u043d\u044f\u0442\u043e":e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(n=e.t0.response.data.error),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:n});case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){var n=e.target,c=n.name,r=n.value;"name"!==c||""!==r.trim()?"city"!==c||""!==r.trim()?"starRating"===c&&(r<0||isNaN(r))?j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435\u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u0447\u0438\u0441\u043b\u043e\u043c"}):m(Object(i.a)(Object(i.a)({},x),{},Object(S.a)({},c,r))):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0413\u043e\u0440\u043e\u0434 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"})},E=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/hotels/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:200===e.sent.status?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u041e\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"}),D()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:null===n?Object(f.jsx)("p",{children:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043e\u0442\u0435\u043b\u0435\u0439."}):Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"ID"}),Object(f.jsx)("th",{children:"\u0418\u043c\u044f"}),Object(f.jsx)("th",{children:"\u0417\u0432\u0435\u0437\u0434\u044b"}),Object(f.jsx)("th",{children:"\u0413\u043e\u0440\u043e\u0434"}),Object(f.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(f.jsx)("tbody",{children:n.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.id}),Object(f.jsx)("td",{children:u===e.id?Object(f.jsx)("input",{type:"text",name:"name",value:x.name||e.name,onChange:function(t){return A(t,e.id)}}):e.name}),Object(f.jsx)("td",{children:u===e.id?Object(f.jsx)("input",{type:"number",name:"starRating",min:1,max:5,value:x.starRating||e.starRating,onChange:function(t){return A(t,e.id)}}):e.starRating}),Object(f.jsx)("td",{children:u===e.id?Object(f.jsx)("input",{type:"text",name:"city",value:x.city||e.city,onChange:function(t){return A(t,e.id)}}):e.city}),Object(f.jsx)("td",{children:u===e.id?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return P(e.id)},children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(f.jsx)("button",{onClick:N,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return t=e.id,n={id:e.id,name:e.name,starRating:e.starRating,city:e.city},l(t),m(n),void k(n);var t,n},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(f.jsx)("button",{onClick:function(){return E(e.id)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})})]},e.id)}))})]})})};var E=function(){var e=Object(d.g)(),t=g.b().shape({username:g.c().min(3,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(15,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043f\u043e\u043b\u0435\u043c"),password:g.c().min(4,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 4 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(20,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041f\u0430\u0440\u043e\u043b\u044c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c \u043f\u043e\u043b\u0435\u043c")});return Object(f.jsx)("div",{className:"registr-page",children:Object(f.jsx)(x.d,{initialValues:{username:"",password:""},onSubmit:function(t){O.a.post("https://course-project-75u9.onrender.com/auth",t).then((function(t){console.log("Registration successful"),e.push("/login")})).catch((function(e){e.response&&409===e.response.status?j.a.fire({icon:"error",title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043d",confirmButtonColor:"#fe6401"}):j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"})}))},validationSchema:t,children:Object(f.jsxs)(x.c,{className:"formContainer",children:[Object(f.jsx)("h1",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(f.jsx)("label",{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: "}),Object(f.jsx)(x.a,{name:"username",component:"span"}),Object(f.jsx)(x.b,{autoComplete:"off",id:"inputCreatePost",name:"username",placeholder:"(alexxx111)"}),Object(f.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c: "}),Object(f.jsx)(x.a,{name:"password",component:"span"}),Object(f.jsx)(x.b,{autoComplete:"off",type:"password",id:"inputCreatePost",name:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c"}),Object(f.jsx)("button",{type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})})};var R=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],u=a[1],l=Object(c.useContext)(p).setAuthState,b=Object(d.g)();return Object(f.jsx)("div",{className:"loginContainer",children:Object(f.jsx)(x.d,{children:Object(f.jsxs)(x.c,{className:"formContainer",children:[Object(f.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(f.jsx)("label",{children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"}),Object(f.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",onChange:function(e){r(e.target.value)}}),Object(f.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c:"}),Object(f.jsx)("input",{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){u(e.target.value)}}),Object(f.jsx)("button",{onClick:function(){var e={username:n,password:i};O.a.post("https://course-project-75u9.onrender.com/auth/login",e).then((function(e){localStorage.setItem("accessToken",e.data.token),localStorage.setItem("isAdmin",e.data.isAdmin),l({username:e.data.username,id:e.data.id,status:!0,isAdmin:e.data.isAdmin}),b.push("/")})).catch((function(e){e.response&&409===e.response.status?j.a.fire({icon:"error",title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u043d",confirmButtonColor:"#fe6401"}):e.response&&401===e.response.status?j.a.fire({icon:"error",title:"\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u044f \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043f\u0430\u0440\u043e\u043b\u044f",confirmButtonColor:"#fe6401"}):e.response&&404===e.response.status?j.a.fire({icon:"error",title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",confirmButtonColor:"#fe6401"}):j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"})}))},children:" \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f "})]})})})};var F=function(){var e=Object(d.g)(),t=Object(c.useState)(5),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){var t=r>0&&setTimeout((function(){o(r-1)}),1e3);return 0===r&&e.push("/"),function(){return clearTimeout(t)}}),[r,e]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(f.jsxs)("p",{children:["\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0447\u0435\u0440\u0435\u0437 ",r," \u0441\u0435\u043a\u0443\u043d\u0434."]})]})};var B=function(){var e=Object(d.g)(),t=Object(c.useState)(5),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){var t=r>0&&setTimeout((function(){o(r-1)}),1e3);return 0===r&&e.push("/"),function(){return clearTimeout(t)}}),[r,e]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"\u0412\u0430\u043c \u043d\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043e \u043f\u043e\u0441\u0435\u0449\u0430\u0442\u044c \u044d\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"}),Object(f.jsxs)("p",{children:["\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b \u0447\u0435\u0440\u0435\u0437 ",r," \u0441\u0435\u043a\u0443\u043d\u0434."]})]})};var q=function(){var e=Object(d.h)().id,t=Object(d.g)(),n=Object(c.useState)([]),r=Object(s.a)(n,2),o=r[0],a=r[1],i=Object(c.useState)(""),u=Object(s.a)(i,2),l=u[0],b=u[1],h=Object(c.useContext)(p).authState;Object(c.useEffect)((function(){localStorage.getItem("accessToken")?x():t.push("/login")}),[]);var x=function(){var t=Object(y.a)(Object(I.a)().mark((function t(){return Object(I.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{O.a.get("https://course-project-75u9.onrender.com/auth/basicinfo/".concat(e),{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){null==e.data?b(null):b(e.data.username)})).catch((function(e){console.error(e)})),O.a.get("https://course-project-75u9.onrender.com/bookings/byUserId/".concat(e),{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){null==e.data?a(null):(console.log(e.data),a(e.data))})).catch((function(e){console.error(e)}))}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var e=Object(y.a)(Object(I.a)().mark((function e(t){return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("https://course-project-75u9.onrender.com/bookings/".concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 3:200===e.sent.status?(j.a.fire({icon:"success",title:"\u0423\u0441\u043f\u0435\u0445",text:"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e"}),x()):j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"profilePageContainer1",children:null!=l?Object(f.jsx)("div",{className:"profilePageContainer",children:Object(f.jsxs)("div",{className:"basicInfo",children:[" ",Object(f.jsxs)("div",{className:"formContainer",children:[Object(f.jsxs)("h1",{children:[" \u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ",l," "]}),h.username===l&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("button",{onClick:function(){t.push("/changepassword")},children:[" ","\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"]}),Object(f.jsx)("div",{children:0==o.length?Object(f.jsx)("p",{children:"\u041d\u0435\u0442 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439"}):Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"ID"}),Object(f.jsx)("th",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043d\u0435\u0439"}),Object(f.jsx)("th",{children:"\u0422\u0443\u0440"}),Object(f.jsx)("th",{children:"\u041e\u0442\u0435\u043b\u044c"}),Object(f.jsx)("th",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(f.jsx)("tbody",{children:o.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.id}),Object(f.jsx)("td",{children:e.numberOfDays}),Object(f.jsx)("td",{children:e.Tour.name}),Object(f.jsx)("td",{children:e.Tour.Hotel.name}),Object(f.jsx)("td",{children:Object(f.jsx)("button",{onClick:function(){return m(e.id)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"})})]},e.id)}))})]})})]})]})]})}):Object(f.jsx)("h2",{children:"\u041d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})};var V=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],u=a[1],l=Object(d.g)();return Object(f.jsx)("div",{className:"ChangePassword-page",children:Object(f.jsx)(x.d,{children:Object(f.jsxs)(x.c,{className:"formContainer",children:[Object(f.jsx)("h1",{children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(f.jsx)("input",{type:"password",placeholder:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){r(e.target.value)}}),Object(f.jsx)("input",{type:"password",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){u(e.target.value)}}),Object(f.jsx)("button",{onClick:function(){O.a.put("https://course-project-75u9.onrender.com/auth/changepassword",{oldPassword:n,newPassword:i},{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){l.push("/")})).catch((function(e){if(e.response){var t=e.response.data.error;j.a.fire({icon:"error",title:"\u041e\u0448\u0438\u0431\u043a\u0430",text:t,confirmButtonColor:"#fe6401"})}else j.a.fire({icon:"error",title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430",text:e.message,confirmButtonColor:"#fe6401"})}))},children:" \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f "})]})})})},H=n(14),M=n(130),J=n.n(M);var L=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)([]),a=Object(s.a)(o,2),i=a[0],u=a[1],l=Object(c.useRef)(),j=Object(c.useRef)(null),d=Object(c.useContext)(p).authState,b=function(){j.current&&j.current.scrollIntoView({behavior:"smooth"})};return Object(c.useEffect)((function(){var e=localStorage.getItem("accessToken");return b(),l.current=J()("https://course-project-75u9.onrender.com",{transports:["websocket"],auth:{token:e}}),l.current.on("allMessages",(function(t){console.log(e),u(t)})),l.current.on("newMessage",(function(t){console.log(e),u((function(e){return[].concat(Object(H.a)(e),[t])})),b()})),function(){l.current.disconnect()}}),[]),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{style:{height:"500px",width:"400px",overflowY:"scroll"},children:[i.map((function(e,t){return Object(f.jsxs)("div",{style:{wordWrap:"break-word",wordBreak:"break-word",whiteSpace:"pre-wrap"},children:[e.author,":",e.text]},t)})),Object(f.jsx)("div",{ref:j})]}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==n.trim()?(l.current.emit("newMessage",{text:n,author:d.username}),b(),r("")):(alert("u cant input 0"),r(""))},children:[Object(f.jsx)("input",{type:"text",placeholder:"Type your message",value:n,onChange:function(e){var t=e.target.value;t.length<=150&&r(t)}}),Object(f.jsx)("button",{type:"submit",children:" \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "})]})]})},U=["component"],W=["component"],Y=["component","isAdmin"];var $=function(){var e=null!=localStorage.getItem("accessToken"),t=function(t){var n=t.component,c=Object(u.a)(t,U);return e=null!=localStorage.getItem("accessToken"),console.log("isauth"),console.log(e),Object(f.jsx)(d.b,Object(i.a)(Object(i.a)({},c),{},{render:function(t){return e?Object(f.jsx)(d.a,{to:"/"}):Object(f.jsx)(n,Object(i.a)({},t))}}))},n=function(t){var n=t.component,c=Object(u.a)(t,W);return e=null!=localStorage.getItem("accessToken"),console.log("statea auth"),console.log(e),e||Z(Object(i.a)(Object(i.a)({},X),{},{status:!1})),Object(f.jsx)(d.b,Object(i.a)(Object(i.a)({},c),{},{render:function(t){return e?Object(f.jsx)(n,Object(i.a)({},t)):Object(f.jsx)(d.a,{to:"/login"})}}))},r=function(e){var t=e.component,n=(e.isAdmin,Object(u.a)(e,Y)),c=null!==localStorage.getItem("accessToken");return localStorage.getItem("isAdmin"),console.log(localStorage.getItem("isAdmin")),Object(f.jsx)(d.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return c&&X.isAdmin?Object(f.jsx)(t,Object(i.a)({},e)):Object(f.jsx)(B,{})}}))},o=Object(d.i)(E),a=Object(d.i)(R),l=Object(d.i)(L),h=Object(d.i)(m),x=Object(d.i)(k),g=Object(d.i)(N),S=Object(d.i)(v),I=Object(d.i)(P),y=Object(d.i)(D),H=Object(d.i)(T),M=Object(d.i)(A),J=Object(d.i)(C),$=Object(d.i)(w),z=Object(d.i)(q),G=Object(d.i)(V),K=Object(c.useState)({username:"",id:0,status:!1,isAdmin:localStorage.getItem("isAdmin")}),Q=Object(s.a)(K,2),X=Q[0],Z=Q[1];return Object(d.g)(),Object(c.useEffect)((function(){O.a.get("https://course-project-75u9.onrender.com/auth/auth",{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){console.log(e.data),e.data.error?(localStorage.removeItem("accessToken"),Z(Object(i.a)(Object(i.a)({},X),{},{status:!1})),"jwt expired"==e.data.error?j.a.fire({icon:"warning",title:"\u0421\u0435\u0441\u0441\u0438\u044f \u0438\u0441\u0442\u0435\u043a\u043b\u0430!",text:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0441\u043d\u043e\u0432\u0430"}).then((function(){window.location.replace("/login")})):j.a.fire({icon:"error",title:"\u0423\u043f\u0441",text:e.data.error})):Z({username:e.data.username,id:e.data.id,status:!0,isAdmin:e.data.isAdmin})})).catch((function(e){localStorage.removeItem("accessToken"),console.log(e),j.a.fire({icon:"error",title:"\u0423\u043f\u0441",text:e.message})}))}),[]),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(p.Provider,{value:{authState:X,setAuthState:Z},children:Object(f.jsxs)(b.a,{children:[Object(f.jsxs)("div",{className:"navbar",children:[Object(f.jsx)("div",{className:"links",children:X.status?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.b,{to:"/",children:" \u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 "}),Object(f.jsx)(b.b,{to:"/addbooking",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(f.jsx)(b.b,{to:"/tours",children:" \u0412\u0441\u0435 \u0442\u0443\u0440\u044b"}),Object(f.jsx)(b.b,{to:"/hotels",children:" \u0412\u0441\u0435 \u043e\u0442\u0435\u043b\u0438"}),X.isAdmin&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.b,{to:"/userstable",children:" \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 "}),Object(f.jsx)(b.b,{to:"/hotelstable",children:" \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043e\u0442\u0435\u043b\u0435\u0439"}),Object(f.jsx)(b.b,{to:"/bookingstable",children:" \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(f.jsx)(b.b,{to:"/tourstable",children:"   \u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0442\u0443\u0440\u043e\u0432 "}),Object(f.jsx)(b.b,{to:"/addhotel",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0435\u043b\u044c"}),Object(f.jsx)(b.b,{to:"/addbooking",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(f.jsx)(b.b,{to:"/addtour",children:" \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0443\u0440"})]})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.b,{to:"/login",children:" \u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f "}),Object(f.jsx)(b.b,{to:"/registration",children:" \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f "})]})}),Object(f.jsxs)("div",{className:"loggedInContainer",children:[Object(f.jsx)("h1",{children:Object(f.jsx)(b.b,{to:"/profile/"+X.id,children:X.username})}),X.status&&Object(f.jsx)("button",{onClick:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("isAdmin"),Z({username:"",id:0,status:!1}),window.location.replace("/")},children:" \u0412\u044b\u0439\u0442\u0438 "})]})]}),Object(f.jsxs)(d.d,{children:[Object(f.jsx)(t,{path:"/registration",exact:!0,component:o}),Object(f.jsx)(t,{path:"/login",exact:!0,component:a}),Object(f.jsx)(n,{path:"/",exact:!0,component:h}),Object(f.jsx)(n,{path:"/chat",exact:!0,component:l}),Object(f.jsx)(n,{path:"/addbooking",exact:!0,component:g}),Object(f.jsx)(n,{path:"/tours",exact:!0,component:J}),Object(f.jsx)(n,{path:"/hotels",exact:!0,component:$}),Object(f.jsx)(r,{path:"/userstable",exact:!0,component:I}),Object(f.jsx)(r,{path:"/hotelstable",exact:!0,component:M}),Object(f.jsx)(r,{path:"/tourstable",exact:!0,component:H}),Object(f.jsx)(r,{path:"/bookingstable",exact:!0,component:y}),Object(f.jsx)(r,{path:"/addhotel",exact:!0,component:x}),Object(f.jsx)(r,{path:"/addtour",exact:!0,component:S}),Object(f.jsx)(n,{path:"/profile/:id",exact:!0,component:z}),Object(f.jsx)(n,{path:"/changepassword",exact:!0,component:G}),Object(f.jsx)(d.b,{path:"*",exact:!0,component:F})]})]})})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,290)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};a.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)($,{})}),document.getElementById("root")),z()}},[[289,1,2]]]);
//# sourceMappingURL=main.ba7a00d7.chunk.js.map